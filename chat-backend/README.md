# Chat Bot Backend

This is the backend for a chat bot application built with FastAPI and MongoDB. A few quick notes:
- The application utilizes FastAPI's dependency injection to manage dependencies
- The conversations are stored in MongoDB
- The chat responses are generated by OpenAI's GPT model
- The chat history is cached in a dictionary within the chat_service, with a backup stored in MongoDB for persistence
- It is currently designed to also return the conversation history immediately upon connecting to the websocket and supporting switching between conversations, but this is not fully implemented yet

## Features

- Real-time chat using WebSockets
- User management
- Cached and persistent conversation history storage
- Integration with OpenAI's GPT model for intelligent responses

## Prerequisites

- Python 3.8+
- MongoDB
- OpenAI API key

## Installation

1. Clone the repository:
   ```
   git clone https://github.com/yourusername/deasie-chat-bot.git
   ```

2. Install dependencies:
   ```
   pip install -r requirements.txt
   ```

3. Set up environment variables:
   Create a `.env` file in the root directory and add the following:
   ```
   MONGODB_URI=your_mongodb_connection_string
   OPENAI_API_KEY=your_openai_api_key
   ```

## Running the Application

To run the application in development mode with auto-reload and the provided logging configuration (located in `./config/logging.yaml`):
```
uvicorn main:app --log-config ./config/logging.yaml --reload
```

## Websocket Endpoint
All endpoints are prefixed with `/api`
- `/chat/{user_id}`: Connect to the websocket, passing in the current user's id
